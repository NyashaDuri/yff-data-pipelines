schema: '2.0'
stages:
  check-for-page-updates:
    cmd: python control.py
    deps:
    - path: control.py
      hash: md5
      md5: 64b22dddf96633c84341fbb72271d0c3
      size: 542
    outs:
    - path: control.csv
      hash: md5
      md5: 934a0caa245c0407a70d196e3b8a936e
      size: 9
  nomis-download:
    cmd: python nomis.py
    deps:
    - path: nomis.py
      hash: md5
      md5: 47ec604aa9c59a1ee1e41e2649959bc4
      size: 11405
    outs:
    - path: ../data/raw/claimants-by-pcon-2010-latest.csv
      hash: md5
      md5: 7f387e1ef61579c73dd4f5a496150091
      size: 488162
    - path: ../data/raw/population-estimates-by-pcon-2010-latest.csv
      hash: md5
      md5: 347e6eb05cdb45f1d08a2d9437bb6956
      size: 383023
  process-claimants:
    cmd: papermill claimants.ipynb ../output/claimants.ipynb
    deps:
    - path: ../data/raw/claimants-by-pcon-2010-latest.csv
      hash: md5
      md5: 7f387e1ef61579c73dd4f5a496150091
      size: 488162
    - path: ../data/raw/population-estimates-by-pcon-2010-latest.csv
      hash: md5
      md5: 347e6eb05cdb45f1d08a2d9437bb6956
      size: 383023
    - path: claimants.ipynb
      hash: md5
      md5: 9637e25a5e987195849c51e86855ff2b
      size: 479184
    outs:
    - path: ../data/processed/claimants/claimants-per-population-latest.csv
      hash: md5
      md5: 228603218411824d513e0774f6429760
      size: 93676
  trigger-site-data:
    cmd: python trigger.py
    deps:
    - path: ../data/metadata
      hash: md5
      md5: 2febbbf356099ba86f558603b398cfbf.dir
      size: 579988
      nfiles: 3
    - path: ../data/processed
      hash: md5
      md5: 6920d4fed1bb8c9d4f6a29ccd5d8e998.dir
      size: 46605150
      nfiles: 5
    - path: trigger.py
      hash: md5
      md5: 14ccb69d7e308d2063db4a6212fd850d
      size: 515
  write-metadata:
    cmd: papermill --no-progress-bar --no-report-mode metadata.ipynb ../output/metadata.ipynb
    deps:
    - path: ../data/metadata/codes/
      hash: md5
      md5: 5a5d88111f34b6431be824b7c157016b.dir
      size: 579908
      nfiles: 2
    - path: metadata.ipynb
      hash: md5
      md5: 511eee0b2b0de051653a42611d26e56b
      size: 2222
    outs:
    - path: ../data/metadata/metadata.csv
      hash: md5
      md5: eed0c6943d1025e50acdda0ef7aac816
      size: 80
